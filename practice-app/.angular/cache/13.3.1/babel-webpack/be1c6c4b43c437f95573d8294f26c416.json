{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/api.service\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"../modal/modal.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"../modal/modal.component\";\n\nfunction CustomerComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 14)(1, \"form\", 15);\n    i0.ɵɵlistener(\"ngSubmit\", function CustomerComponent_div_0_Template_form_ngSubmit_1_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return ctx_r3.submitCustomerForm();\n    });\n    i0.ɵɵelementStart(2, \"div\", 16)(3, \"label\");\n    i0.ɵɵtext(4, \"Email\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"input\", 17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 16)(7, \"label\");\n    i0.ɵɵtext(8, \"Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(9, \"input\", 18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"div\", 16)(11, \"label\");\n    i0.ɵɵtext(12, \"Phone Number\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(13, \"input\", 19);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"button\", 20);\n    i0.ɵɵtext(15, \"Submit\");\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"formGroup\", ctx_r0.customerForm);\n  }\n}\n\nfunction CustomerComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 21)(1, \"div\", 22)(2, \"span\", 23);\n    i0.ɵɵtext(3, \"Loading...\");\n    i0.ɵɵelementEnd()()();\n  }\n}\n\nfunction CustomerComponent_div_5_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 30)(1, \"i\", 31);\n    i0.ɵɵlistener(\"click\", function CustomerComponent_div_5_div_10_Template_i_click_1_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const item_r5 = i0.ɵɵnextContext().$implicit;\n      const ctx_r7 = i0.ɵɵnextContext();\n      return ctx_r7.setForEdit(item_r5);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"i\", 32);\n    i0.ɵɵlistener(\"click\", function CustomerComponent_div_5_div_10_Template_i_click_2_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const item_r5 = i0.ɵɵnextContext().$implicit;\n      const ctx_r10 = i0.ɵɵnextContext();\n      return ctx_r10.setForDelete(item_r5.email);\n    });\n    i0.ɵɵelementEnd()();\n  }\n}\n\nconst _c0 = function (a1) {\n  return [\"/customer\", a1];\n};\n\nfunction CustomerComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24)(1, \"div\", 25)(2, \"div\", 26)(3, \"div\", 27)(4, \"a\", 28);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"h6\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"h6\");\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵtemplate(10, CustomerComponent_div_5_div_10_Template, 3, 0, \"div\", 29);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r5 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(5, _c0, item_r5.name));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(item_r5.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r5.email);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r5.phoneNumber);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r2.isStatic);\n  }\n}\n\nexport let CustomerComponent = /*#__PURE__*/(() => {\n  class CustomerComponent {\n    constructor(apiService, formBuilder, modalService) {\n      this.apiService = apiService;\n      this.formBuilder = formBuilder;\n      this.modalService = modalService;\n      this.apiCalling = 0;\n      this.staticCustomers = [{\n        name: \"Junayed\",\n        email: \"junayedrensa@gmail.com\",\n        phoneNumber: \"0123\"\n      }, {\n        name: \"abc-abc\",\n        email: \"abc-abc@gmail.com\",\n        phoneNumber: \"4567\"\n      }, {\n        name: \"bcd-bcd\",\n        email: \"bcd-bcd@gmail.com\",\n        phoneNumber: \"891011\"\n      }];\n      this.customerDeleteWarning = \"customerDeleteWarning\";\n      this.formSubmitted = false;\n      this.saveMode = 0;\n      this.isStatic = true;\n      this.customerForm = this.formBuilder.group({\n        name: ['', {\n          validators: [Validators.required]\n        }],\n        email: ['', {\n          validators: [Validators.required]\n        }],\n        phoneNumber: ['', {\n          validators: [Validators.required]\n        }]\n      });\n    }\n\n    ngOnInit() {\n      if (!this.isStatic) {\n        this.loadCustomers();\n      } else {\n        this.customers = this.staticCustomers;\n      }\n    }\n\n    submitCustomerForm() {\n      this.formSubmitted = true;\n\n      if (!this.customerForm.valid) {\n        return;\n      }\n\n      let customerData = {\n        email: this.customerForm.controls['email'].value,\n        name: this.customerForm.controls['name'].value,\n        phoneNumber: this.customerForm.controls['phoneNumber'].value\n      };\n      this.apiCalling = 1;\n\n      if (this.saveMode == 1) {\n        this.apiService.saveCustomer(customerData).subscribe(data => {\n          this.customers.splice(0, 0, data);\n          this.apiCalling = 2;\n          this.resetForm();\n          this.saveMode = 0;\n          this.formSubmitted = false;\n        });\n      } else if (this.saveMode == 2) {\n        this.apiService.updateCustomer(customerData).subscribe(data => {\n          this.customers = this.customers.filter(c => c.email != customerData.email);\n          this.customers.splice(0, 0, data);\n          this.apiCalling = 2;\n          this.resetForm();\n          this.saveMode = 0;\n          this.formSubmitted = false;\n        });\n      }\n    }\n\n    loadCustomers() {\n      this.apiCalling = 1;\n      this.apiService.getCustomers().subscribe(customers => {\n        this.customers = customers;\n        this.apiCalling = 2;\n      });\n    }\n\n    setForDelete(deleteEmail) {\n      this.deleteEmail = deleteEmail;\n      this.modalService.open(this.customerDeleteWarning);\n    }\n\n    closeModal() {\n      this.deleteEmail = '';\n      this.modalService.close(this.customerDeleteWarning);\n    }\n\n    deleteRequest() {\n      this.apiCalling = 1;\n      this.apiService.deleteCustomers(this.deleteEmail).subscribe(data => {\n        this.customers = this.customers.filter(c => c.email != this.deleteEmail);\n        this.deleteEmail = '';\n        this.apiCalling = 2;\n        this.closeModal();\n      });\n    }\n\n    setForEdit(customer) {\n      this.customerForm.setValue({\n        name: customer.name,\n        email: customer.email,\n        phoneNumber: customer.phoneNumber\n      });\n      this.saveMode = 2;\n    }\n\n    setForSave() {\n      this.saveMode = 1;\n      this.resetForm();\n    }\n\n    resetForm() {\n      this.customerForm.setValue({\n        name: '',\n        email: '',\n        phoneNumber: ''\n      });\n    }\n\n  }\n\n  CustomerComponent.ɵfac = function CustomerComponent_Factory(t) {\n    return new (t || CustomerComponent)(i0.ɵɵdirectiveInject(i1.ApiService), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(i3.ModalService));\n  };\n\n  CustomerComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CustomerComponent,\n    selectors: [[\"app-customer\"]],\n    decls: 17,\n    vars: 4,\n    consts: [[\"class\", \"mt-5 w-50\", 4, \"ngIf\"], [1, \"w-50\", \"mt-5\"], [\"class\", \"d-flex justify-content-center pb-5\", \"style\", \"margin-top: 200px;\", 4, \"ngIf\"], [1, \"text-center\"], [1, \"fa\", \"fa-plus\", 2, \"cursor\", \"pointer\", 3, \"click\"], [\"class\", \"row\", 4, \"ngFor\", \"ngForOf\"], [3, \"id\"], [1, \"modal-content\"], [1, \"modal-header\"], [1, \"modal-title\"], [\"type\", \"button\", 1, \"btn-close\", 3, \"click\"], [1, \"modal-footer\"], [1, \"btn\", \"btn-danger\", 3, \"click\"], [1, \"btn\", \"btn-primary\", 3, \"click\"], [1, \"mt-5\", \"w-50\"], [3, \"formGroup\", \"ngSubmit\"], [1, \"form-group\", \"mt-2\"], [\"type\", \"email\", \"name\", \"email\", \"formControlName\", \"email\", 1, \"form-control\"], [\"type\", \"text\", \"name\", \"name\", \"formControlName\", \"name\", 1, \"form-control\"], [\"type\", \"text\", \"name\", \"phoneNumber\", \"formControlName\", \"phoneNumber\", 1, \"form-control\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", \"mt-2\"], [1, \"d-flex\", \"justify-content-center\", \"pb-5\", 2, \"margin-top\", \"200px\"], [\"role\", \"status\", 1, \"spinner-grow\", \"text-primary\"], [1, \"sr-only\"], [1, \"row\"], [1, \"col-10\"], [1, \"card\"], [1, \"card-body\"], [3, \"routerLink\"], [\"class\", \"col-2 d-flex align-items-center\", 4, \"ngIf\"], [1, \"col-2\", \"d-flex\", \"align-items-center\"], [1, \"fa\", \"fa-edit\", 2, \"cursor\", \"pointer\", 3, \"click\"], [1, \"fa\", \"fa-trash\", 2, \"margin-left\", \"20%\", \"cursor\", \"pointer\", 3, \"click\"]],\n    template: function CustomerComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, CustomerComponent_div_0_Template, 16, 1, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵtemplate(2, CustomerComponent_div_2_Template, 4, 0, \"div\", 2);\n        i0.ɵɵelementStart(3, \"div\", 3)(4, \"i\", 4);\n        i0.ɵɵlistener(\"click\", function CustomerComponent_Template_i_click_4_listener() {\n          return ctx.setForSave();\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(5, CustomerComponent_div_5_Template, 11, 7, \"div\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"app-modal\", 6)(7, \"div\", 7)(8, \"div\", 8)(9, \"h5\", 9);\n        i0.ɵɵtext(10, \"Are you sure to delete\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"button\", 10);\n        i0.ɵɵlistener(\"click\", function CustomerComponent_Template_button_click_11_listener() {\n          return ctx.closeModal();\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(12, \"div\", 11)(13, \"button\", 12);\n        i0.ɵɵlistener(\"click\", function CustomerComponent_Template_button_click_13_listener() {\n          return ctx.deleteRequest();\n        });\n        i0.ɵɵtext(14, \"Delete\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"button\", 13);\n        i0.ɵɵlistener(\"click\", function CustomerComponent_Template_button_click_15_listener() {\n          return ctx.closeModal();\n        });\n        i0.ɵɵtext(16, \"Cancel\");\n        i0.ɵɵelementEnd()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.isStatic == false && ctx.saveMode != 0);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.apiCalling == 1);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngForOf\", ctx.customers);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"id\", ctx.customerDeleteWarning);\n      }\n    },\n    directives: [i4.NgIf, i2.ɵNgNoValidate, i2.NgControlStatusGroup, i2.FormGroupDirective, i2.DefaultValueAccessor, i2.NgControlStatus, i2.FormControlName, i4.NgForOf, i5.RouterLinkWithHref, i6.ModalComponent],\n    styles: [\"\"]\n  });\n  return CustomerComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}